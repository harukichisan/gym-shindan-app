# ジム診断ブラウザアプリ エンドポイント設計（v0.1）

更新日: 2026-01-29  
対象: MVP（共有機能のみ）

## 1. 基本方針
- ベースパス: `/api/v1`
- 認証: MVPは不要（個人情報なし）
- レート制限: 共有リンク作成の乱用防止のみ（IP単位）
- CORS: ブラウザアプリからの利用を許可

## 2. エンドポイント一覧
### 2.1 設定/メタ情報
- `GET /api/v1/config`
  - 質問、ジムタイプ辞書、スコアリング設定を一括取得
  - 静的JSON配信でも可（API実装は任意）

### 2.2 診断スコアリング
- `POST /api/v1/diagnoses/score`
  - 回答から結果を返す（サーバで計算する場合）
  - クライアント計算の場合は未実装でも可

### 2.3 共有リンク
- `POST /api/v1/share`
  - 結果（最小ペイロード）から共有トークンを発行
- `GET /api/v1/share/{share_id}`
  - 共有トークンから結果を復元

### 2.4 稼働監視
- `GET /api/v1/health`
  - 200 OK を返す簡易ヘルスチェック

## 3. ステータスコード
- 200 OK
- 201 Created（共有リンク作成）
- 400 Bad Request（形式不正）
- 404 Not Found（share_id 不存在）
- 422 Unprocessable Entity（回答が仕様外）
- 429 Too Many Requests（レート制限）
- 500 Internal Server Error

## 4. セキュリティ/プライバシー
- 個人情報なし
- 共有リンクは推測困難なトークン
- ペイロードは結果のみに限定（回答の生データは含めない）

## 5. 実装メモ（MVP判断）
- フロントのみ構成なら `config` は静的JSONで配信
- `diagnoses/score` もフロント計算で省略可能
- 共有リンクだけはサーバで保持するとURLが短くなる
